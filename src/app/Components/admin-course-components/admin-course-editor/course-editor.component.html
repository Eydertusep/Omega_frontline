<div class="course-editor" *ngIf="selectedCourse">
  <h2>{{ selectedCourse.title }}</h2>
  <button class="add-button" (click)="addModule()">Agregar Módulo</button>

  <!-- Contenedor -->
  <div class="module-list" cdkDropList (cdkDropListDropped)="drop($event)">
    <div class="module" *ngFor="let module of selectedCourse?.modules; let i = index" cdkDrag>

      <!-- Vista normal -->
      <div class="module-header" *ngIf="!module.isEditing">
        <h3>{{ module.title }}</h3>
        <div class="module-actions">
        <button class="edit-button" (click)="editModule(module)">Editar</button>
        <button class="delete-button" (click)="deleteModule(module)">Eliminar</button>
        </div>
      </div>

      <div class="file-upload">
      <input type="file" (change)="onFileSelected($event, module)" />
      <p *ngIf="module.fileName">📁 Archivo cargado: {{ module.fileName }}</p>
      </div>

      <!-- Vista de edición -->
      <div class="edit-mode" *ngIf="module.isEditing">
        <input [(ngModel)]="module.title" />
        <button class="save-button" (click)="saveModule(module)">Guardar</button>
        <button class="cancel-button" (click)="module.isEditing = false">Cancelar</button>
      </div>

      <!-- Lista de temas dentro del módulo -->
      <div class="topic-list">
      <div class="topic" *ngFor="let topic of module.topics">
        <h4>
          {{ topic.title }}
          <button class="edit-button"(click)="editTopic(topic)">Editar</button>
          <button class="delete-button"(click)="deleteModule(module)">Eliminar</button>
        </h4>

        <!-- Edición de temas -->
        <div class="edit-mode" *ngIf="topic.isEditing">
          <input [(ngModel)]="topic.title" />
          <button class="save-button"(click)="saveTopic(topic)">Guardar</button>
          <button class="cancel-button"(click)="topic.isEditing = false">Cancelar</button>
        </div>

        <!-- Lista de subtemas dentro del tema -->
        <ul class="subtopic-list">
          <li class="subtopic" *ngFor="let subtopic of topic.subtopics">
            {{ subtopic.title }}
            <button class="edit-button" (click)="editSubtopic(subtopic)">Editar</button>
            <button class="delete-button" (click)="deleteModule(module)">Eliminar</button>

         <!-- Edición de subtemas -->
            <div class="edit-mode" *ngIf="subtopic.isEditing">
              <input [(ngModel)]="subtopic.title" />
              <button class="save-button"(click)="saveSubtopic(subtopic)">Guardar</button>
              <button class="cancel-button"(click)="subtopic.isEditing = false">Cancelar</button>
             </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>